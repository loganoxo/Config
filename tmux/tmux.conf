# ------------------------------------------ Tmux Command ------------------------------------------
# https://tmuxcheatsheet.com/
# https://wangchujiang.com/reference/docs/tmux.html
# https://gist.github.com/MohamedAlaa/2961058

# tmux [new -s ä¼šè¯å -n çª—å£å]                          å¯åŠ¨æ–°ä¼šè¯
# tmux at [-t ä¼šè¯å]                                    æ¢å¤ä¼šè¯
# tmux ls                                               åˆ—å‡ºæ‰€æœ‰ä¼šè¯
# tmux kill-session -t ä¼šè¯å                            å…³é—­ä¼šè¯

# åœ¨ Tmux ä¸­, æŒ‰ä¸‹ Tmux å‰ç¼€, ç„¶å:
# t  æ˜¾ç¤ºä¸€ä¸ªæ•°å­—æ—¶é’Ÿ;          ?  åˆ—å‡ºæ‰€æœ‰å¿«æ·é”®(æŒ‰qé€€å‡º);              :  è¾“å…¥å‘½ä»¤
# s  åˆ—å‡ºæ‰€æœ‰session;          d  é€€å‡ºå½“å‰ä¼šè¯(tmux ä»åœ¨åå°è¿è¡Œ);       $  é‡å‘½åå½“å‰ä¼šè¯;
# w  åˆ—å‡ºæ‰€æœ‰çª—å£;              c  åˆ›å»ºæ–°çª—å£;                         n/p  å/å‰ä¸€ä¸ªçª—å£;
# ,  é‡å‘½åå½“å‰çª—å£;            &  å…³é—­å½“å‰çª—å£                         f  æŸ¥æ‰¾çª—å£;
# %  å‚ç›´åˆ†å‰²;                 "  æ°´å¹³åˆ†å‰²;                           æˆ‘æ”¹æˆäº†  | å‚ç›´åˆ†å‰²; -  æ°´å¹³åˆ†å‰²
# o  é€‰æ‹©ä¸‹ä¸€ä¸ªçª—æ ¼;            x  å…³é—­çª—æ ¼;                           <space> åˆ‡æ¢å¸ƒå±€;
# z åˆ‡æ¢çª—æ ¼æœ€å¤§åŒ–/æœ€å°åŒ–;       0..9 æŒ‰æ•°å­—åˆ‡æ¢/é€‰æ‹©çª—å£                  q æ˜¾ç¤ºæ¯ä¸ªçª—æ ¼æ˜¯ç¬¬å‡ ä¸ª,å½“æ•°å­—å‡ºç°çš„æ—¶å€™æŒ‰æ•°å­—å‡ å°±é€‰ä¸­ç¬¬å‡ ä¸ªçª—æ ¼
# ! å°†çª—æ ¼æå‡ä¸ºä¸€ä¸ªæ–°çš„çª—å£                                           <;>  åˆ‡æ¢æœ€åä¸€ä¸ªæ´»åŠ¨çª—æ ¼

# { ä¸ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®;         } ä¸ä¸‹ä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®;
# ( åˆ‡æ¢å½“å‰è§†è§’ä¸ºä¸Šä¸€ä¸ªsession;  ) åˆ‡æ¢å½“å‰è§†è§’ä¸ºä¸‹ä¸€ä¸ªsession
# [ å¼€å¯å¤åˆ¶æ¨¡å¼;                ] ç²˜è´´tmuxç¼“å†²åŒº(åˆšå¤åˆ¶çš„å†…å®¹)é‡Œçš„å†…å®¹

# æŒ‰ä¸‹ Tmux å‰ç¼€å’Œä¸€ä¸ªå†’å·å‘¼å‡ºå‘½ä»¤æç¤ºè¡Œ,è¾“å…¥ä¸‹é¢çš„å‘½ä»¤,ç”¨äºåŒæ­¥å½“å‰çª—å£ä¸­çš„æ‰€æœ‰çª—æ ¼çš„è¾“å…¥,ä½ åœ¨ä¸€ä¸ªçª—æ ¼ä¸­çš„ä»»ä½•è¾“å…¥éƒ½ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å…¶ä»–çª—æ ¼ä¸­
# è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨,æ¯”å¦‚ä½ æƒ³åœ¨å¤šå°sshè¿æ¥çš„ä¸åŒæœåŠ¡å™¨ä¸­æ‰§è¡Œç›¸åŒçš„å‘½ä»¤,é‚£ä¹ˆå°±å¯ä»¥å…ˆåœ¨æœ¬åœ°å¼€ä¸€ä¸ªtmux,ç„¶ååˆ†å‰²pane,æ¯ä¸ªpaneéƒ½ç”¨sshè¿æ¥ä¸åŒçš„æœåŠ¡å™¨
# ç„¶åç”¨ prefix + C-t å¼€å¯åŒæ­¥, ç„¶ååœ¨Açª—æ ¼ä¸­è¾“å…¥å­—ç¬¦,åœ¨å…¶ä»–çª—æ ¼ä¸­éƒ½ä¼šå®æ—¶çš„åŒæ­¥,å›è½¦æ‰§è¡Œå‘½ä»¤,ä¹Ÿæ˜¯åŒæ­¥è¿›è¡Œçš„
# åªé’ˆå¯¹äºå½“å‰çª—å£çš„æ‰€æœ‰çª—æ ¼, å¯¹äºå…¶ä»–å½“å‰sessionçš„çª—å£ å’Œ å…¶ä»–session çš„çª—å£ æ˜¯ä¸ä¼šåŒæ­¥çš„
# :setw synchronize-panes on

# ------------------------------------------ Tmux Config ------------------------------------------
# bind ä¸º bind-key çš„ç¼©å†™; setä¸ºset-optionçš„ç¼©å†™; setw ä¸º set-window-option çš„ç¼©å†™
# bind -r                                                   repeatable çš„ç¼©å†™,è®©ç»‘å®šçš„å¿«æ·é”®åœ¨æŒ‰ä½ä¸æ”¾æ—¶å¯ä»¥é‡å¤è§¦å‘
# bind -n                                                   ç»‘å®šä¸éœ€è¦å‰ç¼€é”®çš„å¿«æ·é”®
# tmux list-keys | grep C-a                                 æ£€æŸ¥æŒ‰é”® C-a æ˜¯å¦è¢«ç»‘å®š
# tmux list-keys | grep -iE "^bind-key\s+-T\s+prefix\s+s\b" æ£€æŸ¥æŒ‰é”® prefix + s æ˜¯å¦è¢«ç»‘å®š
# tmux source-file ~/.tmux.conf                             é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
# set -g                                                    -g: å…¨å±€è®¾ç½®ï¼Œå½±å“æ‰€æœ‰ä¼šè¯ï¼Œæ¨èç”¨äºé€šç”¨é…ç½®; ä¸åŠ  -g: ä»…å½±å“å½“å‰ä¼šè¯

# ------------------------------------------ prefix ------------------------------------------
# ç»‘å®šCtrl+sä¸ºæ–°çš„æŒ‡ä»¤å‰ç¼€; å€¼å¾—æ³¨æ„: C-såœ¨æˆ‘çš„vimä¸­é…ç½®ä¸ºä¿å­˜å½“å‰æ–‡ä»¶; æ’ä»¶tmux-resurrectçš„é»˜è®¤å¿«æ·é”®ä¸º prefix + C-s
set -g prefix C-s
# C-bå³Ctrl+bé”®ï¼Œunbindæ„å‘³ç€è§£é™¤ç»‘å®š
unbind C-b
# ä¾‹å¦‚,å½“å‰ç¼€é”®ä¸º C-a æ—¶,è¿™ä¸ªé”®é»˜è®¤ä¼šè¢«tmuxæ•è·,ç»ˆç«¯é»˜è®¤çš„ç”¨C-aå›åˆ°è¡Œé¦–çš„åŠŸèƒ½å°±ä½¿ç”¨ä¸äº†
# send-prefix çš„ä½œç”¨å°±æ˜¯å°† å‰ç¼€é”®æœ¬èº«ç›´æ¥å‘ç»™å½“å‰çª—å£ä¸­çš„ç¨‹åº, è®©ç¨‹åºèƒ½å¤Ÿæ­£ç¡®å¤„ç†
# æ‰€ä»¥åŒå‡» C-a, å°±èƒ½è®©ç»ˆç«¯å›åˆ°è¡Œé¦– æˆ–è€… è§¦å‘å½“å‰ç»ˆç«¯æ­£åœ¨å‰å°ä½¿ç”¨çš„ç¨‹åºçš„æŸä¸ªåŠŸèƒ½
bind C-s send-prefix

# ä»tmux v1.6ç‰ˆèµ·ï¼Œæ”¯æŒè®¾ç½®ç¬¬äºŒä¸ªæŒ‡ä»¤å‰ç¼€
# set-option -g prefix2 ` # è®¾ç½®ä¸€ä¸ªä¸å¸¸ç”¨çš„`é”®ä½œä¸ºæŒ‡ä»¤å‰ç¼€ï¼ŒæŒ‰é”®æ›´å¿«äº›

# ------------------------------------------ åŠŸèƒ½é…ç½® ------------------------------------------
# å¼€å¯256é¢œè‰²æ”¯æŒ,
# tmux-256color æ˜¯ä¸“é—¨ä¸º tmux è®¾è®¡çš„é…ç½®;æ”¹å–„äº†ä¸€äº›ç¨‹åºåœ¨ tmux ä¸­è¿è¡Œæ—¶çš„å…¼å®¹æ€§é—®é¢˜
set -g default-terminal tmux-256color
# xterm-256colorå¸¸è§äºç°ä»£ç»ˆç«¯æ¨¡æ‹Ÿå™¨,å®ƒçš„ç»ˆç«¯åŠŸèƒ½æ›´ä¸°å¯Œï¼Œæ”¯æŒæ›´å¹¿æ³›çš„åº”ç”¨,å¦‚é¼ æ ‡æ”¯æŒã€æ›´å¤šé”®ç»‘å®š
# set -g default-terminal "xterm-256color"
# screen-256color æ›´åŠ å…¼å®¹æ—§çš„ç»ˆç«¯ç¯å¢ƒ,åŠŸèƒ½æ¯” xterm-256color ç•¥æœ‰é™,ä½†æ›´ä¿å®ˆå’Œç¨³å®š
# set -g default-terminal "screen-256color"

# å¼€å¯é¼ æ ‡æ”¯æŒ v2.1åŠä»¥ä¸Šçš„ç‰ˆæœ¬
set -g mouse on

# ä¿®æ”¹iterm2çš„æ ‡é¢˜
set -g set-titles on
set -g set-titles-string "tmux - #{session_name} - #{host}"

# è®¾ç½® tmux çª—å£çš„ç¼–å·èµ·å§‹å€¼ä¸º 1
set -g base-index 1
# è®¾ç½® tmux çª—æ ¼(pane)çš„ç¼–å·èµ·å§‹å€¼ä¸º 1
set -g pane-base-index 1
# å–æ¶ˆ "å…³æ‰æŸä¸ªçª—å£åï¼Œçª—å£ç¼–å·ä¼šæŒ‰ç…§é¡ºåºé‡æ–°è®¾ç½®" çš„åŠŸèƒ½
set -g renumber-windows off

# å…è®¸tmuxè‡ªåŠ¨æ ¹æ®å½“å‰çª—å£è¿è¡Œçš„å‘½ä»¤é‡å‘½åçª—å£
setw -g automatic-rename  on
# ç¦æ­¢æ´»åŠ¨è¿›ç¨‹é€šè¿‡è½¬ä¹‰åºåˆ—ä¿®æ”¹çª—å£å
setw -g allow-rename off

# prefix + q æ˜¾ç¤ºç¼–å·çš„é©»ç•™æ—¶é•¿,å•ä½ ms
set -g display-panes-time 10000

# å•ä½ ms,é»˜è®¤ä¸º 500æ¯«ç§’; bind -r çš„å¿«æ·é”®é‡å¤çš„è¶…æ—¶æ—¶é—´
# ä¸æ˜¯prefixå’Œä¹‹åçš„æŒ‰é”®ä¹‹é—´çš„æ—¶é—´;å¦‚ bind -r a <command>;æ˜¯æŒ‰ä¸‹prefixå,è¿ç»­æŒ‰ a é”®,æ¯ä¸ªaé”®ä¹‹é—´çš„è¶…æ—¶æ—¶é—´
set -g repeat-time 2000

# tmux ä¼šåœ¨ä½ æ²¡æœ‰èšç„¦æŸä¸ªçª—å£(ä¸æ˜¯çª—æ ¼)æ—¶,ç›‘æ§è¯¥çª—å£æ˜¯å¦æœ‰æ–°çš„è¾“å‡º,ä¼šæœ‰ä¸€ä¸ªå“é“ƒ
setw -g monitor-activity on
# å½“çª—å£(ä¸æ˜¯çª—æ ¼)ä¸­çš„è¾“å‡ºå‘ç”Ÿå˜åŒ–æ—¶,tmux ä¼šåœ¨çŠ¶æ€æ æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯,è€Œä¸æ˜¯ç”¨ monitor-activity çš„å“é“ƒ;é™¤éonæ¢æˆboth,ä¼šåŒæ—¶è¾“å‡ºå“é“ƒå’Œæ¶ˆæ¯
set -g visual-activity on

# ------------------------------------------ é”®ç›˜æ˜ å°„ ------------------------------------------
# ä¿æŒé»˜è®¤çš„å¿«æ·é”®çš„é”®ä½ä¸å˜,ä½†æ˜¯åŠŸèƒ½åŠ å¼º
# é»˜è®¤çš„å¿«æ·é”®å°±æ˜¯è¿™æ ·çš„,æˆ‘åªæ˜¯åŠ äº† -r
# { ä¸ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®;         } ä¸ä¸‹ä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®;
# ( åˆ‡æ¢å½“å‰è§†è§’ä¸ºä¸Šä¸€ä¸ªsession;  ) åˆ‡æ¢å½“å‰è§†è§’ä¸ºä¸‹ä¸€ä¸ªsession
bind -r "{" swap-pane -U
bind -r "}" swap-pane -D
bind -r "(" switch-client -p
bind -r ")" switch-client -n

# åˆ‡æ¢çª—å£,åœ¨é»˜è®¤çš„å¿«æ·é”®åŸºç¡€ä¸Š åŠ äº† -r,èƒ½è¿ç»­æŒ‰
bind -r C-p previous-window
bind -r p previous-window
bind -r C-n next-window
bind -r n next-window

# æ–°å¢çª—å£æ—¶,ä¿æŒç›®å½•ä¸å˜
bind-key "c" new-window -c "#{pane_current_path}"

# åˆ†å±,ä¿ç•™é»˜è®¤çš„,ä½†æ˜¯å¢åŠ ä¿æŒç›®å½•çš„åŠŸèƒ½
bind-key "%" split-window -h -c "#{pane_current_path}"
bind-key '"' split-window -v -c "#{pane_current_path}"

# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ´»åŠ¨çª—æ ¼,åŠ äº† -r
bind -r ";" last-pane

# ä¿ç•™ prefix+<space> çš„åˆ‡æ¢å¸ƒå±€çš„åŠŸèƒ½ åŠ äº† -r
bind -r Space next-layout

# ä½¿ Yazi çš„å›¾åƒé¢„è§ˆèƒ½å¤Ÿåœ¨ tmux ä¸­æ­£å¸¸å·¥ä½œ,ä½†æ˜¯æˆ‘ä¸è¿™æ ·è®¾ç½®ä¹Ÿå¯ä»¥å¸çº³äº‹å›¾ç‰‡é¢„è§ˆ,æ‰€ä»¥å…ˆæ³¨é‡Šå§
# set -g allow-passthrough on
# set -ga update-environment TERM
# set -ga update-environment TERM_PROGRAM

# ------------------------------------------ æ–°å¢çš„å¿«æ·é”®

# å°†å½“å‰çª—æ ¼åˆ†ç¦»å¹¶æå‡ä¸ºä¸€ä¸ªæ–°çš„çª—å£å¹¶åˆ‡æ¢åˆ°è¯¥çª—å£
# bind-key W break-pane  # ç”¨é»˜è®¤çš„ prefix+! å§

# æ·»åŠ è½½åœ¨é…ç½®æ–‡ä»¶æŒ‡ä»¤ä¸ºï¼š prefix + R
bind C-r source-file ~/.tmux.conf \; display-message "Config reloaded.."

# åŒæ­¥(ä¸åŒæ­¥)å½“å‰çª—å£ä¸­çš„æ‰€æœ‰çª—æ ¼çš„è¾“å…¥,ä½ åœ¨ä¸€ä¸ªçª—æ ¼ä¸­çš„ä»»ä½•è¾“å…¥éƒ½ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å…¶ä»–çª—æ ¼ä¸­
# è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨,æ¯”å¦‚ä½ æƒ³åœ¨å¤šå°sshè¿æ¥çš„ä¸åŒæœåŠ¡å™¨ä¸­æ‰§è¡Œç›¸åŒçš„å‘½ä»¤,é‚£ä¹ˆå°±å¯ä»¥å…ˆåœ¨æœ¬åœ°å¼€ä¸€ä¸ªtmux,ç„¶ååˆ†å‰²pane,æ¯ä¸ªpaneéƒ½ç”¨sshè¿æ¥ä¸åŒçš„æœåŠ¡å™¨
# ç„¶åç”¨ prefix + C-t å¼€å¯åŒæ­¥, ç„¶ååœ¨Açª—æ ¼ä¸­è¾“å…¥å­—ç¬¦,åœ¨å…¶ä»–çª—æ ¼ä¸­éƒ½ä¼šå®æ—¶çš„åŒæ­¥,å›è½¦æ‰§è¡Œå‘½ä»¤,ä¹Ÿæ˜¯åŒæ­¥è¿›è¡Œçš„
# åªé’ˆå¯¹äºå½“å‰çª—å£çš„æ‰€æœ‰çª—æ ¼, å¯¹äºå…¶ä»–å½“å‰sessionçš„çª—å£ å’Œ å…¶ä»–session çš„çª—å£ æ˜¯ä¸ä¼šåŒæ­¥çš„
bind C-t setw synchronize-panes

# è¿™ä¸ªå‘½ä»¤ä¼šå°†å½“å‰çª—å£å†…çš„æ‰€æœ‰çª—æ ¼é‡æ–°æ’åˆ—æˆç½‘æ ¼çŠ¶,tiled å¸ƒå±€ä¼šå°†å¤šä¸ªçª—æ ¼æ’åˆ—æˆä¸€ä¸ªå°½å¯èƒ½ç­‰å®½ç­‰é«˜çš„ç½‘æ ¼,å¯ä»¥æ ¹æ®çª—æ ¼æ•°é‡è‡ªåŠ¨è°ƒæ•´å¸ƒå±€
# bind Space select-layout tiled
# ä¿ç•™ prefix+<space> çš„åˆ‡æ¢å¸ƒå±€çš„åŠŸèƒ½,è¿˜æ˜¯åˆ«å†™æ­»äº†,è¿˜æ˜¯æŒºæœ‰ç”¨çš„
bind Enter select-layout tiled

# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ´»åŠ¨çª—å£
bind -r C-e last

# çª—å£(ä¸æ˜¯çª—æ ¼)äº¤æ¢
# prefix + <                            å°†å½“å‰çª—å£å‘å·¦ç§»åŠ¨ä¸€ä½
# prefix + >                            å°†å½“å‰çª—å£å‘å³ç§»åŠ¨ä¸€ä½
bind-key -r "<" swap-window -d -t -1
bind-key -r ">" swap-window -d -t +1

# åˆ‡æ¢çª—å£,ä¸éœ€è¦ prefix ; M ä¸º option æˆ– alt é”®
bind -n M-0 next-window
bind -n M-9 previous-window

# çª—æ ¼(pane)é€‰æ‹©
# prefix + h/j/k/l                 é€‰æ‹© å·¦/ä¸‹/ä¸Š/å³ ä¾§çš„çª—æ ¼
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r l select-pane -R

# åˆ†å‰²çª—æ ¼
# prefix + |                            å°†å½“å‰çª—æ ¼åˆ†æˆ å·¦å³ ä¸¤éƒ¨åˆ†
# prefix + -                            å°†å½“å‰çª—æ ¼åˆ†ä¸º ä¸Šä¸‹ ä¸¤éƒ¨åˆ†
# prefix + \                            åœ¨å³ä¾§å¼€å¯ä¸€ä¸ª ç»ˆç«¯å®½åº¦/2 ç»ˆç«¯å…¨é«˜ çš„æ–°çª—æ ¼
# prefix + _                            åœ¨ä¸‹æ–¹å¼€å¯ä¸€ä¸ª ç»ˆç«¯é«˜åº¦/2 ç»ˆç«¯å…¨å®½ çš„æ–°çª—æ ¼
bind-key "|" split-window -h -c "#{pane_current_path}"
bind-key "\\" split-window -fh -c "#{pane_current_path}"
bind-key "-" split-window -v -c "#{pane_current_path}"
bind-key "_" split-window -fv -c "#{pane_current_path}"

# çª—æ ¼(pane)é€‰æ‹© (ä¸ç”¨prefix); å¹¶ä¸”å¢åŠ äº†ä¸vimçš„é…åˆ,åœ¨vimä¸­å®‰è£…vim-tmux-navigatoræ’ä»¶
# See: https://github.com/christoomey/vim-tmux-navigator
# <ctrl-h/j/k/l>    é€‰æ‹© å·¦/ä¸‹/ä¸Š/å³ ä¾§çš„çª—æ ¼(æˆ–è€…vimçš„åˆ†å±);
# <ctrl-\>          åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ´»åŠ¨çª—æ ¼(æˆ–è€…vimçš„åˆ†å±)
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|l?n?vim?x?|fzf)(diff)?$'"
bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h'  'select-pane -L'
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j'  'select-pane -D'
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k'  'select-pane -U'
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l'  'select-pane -R'
#tmux_version='$(tmux -V | sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p")'
if-shell -b '[ $(echo $(tmux -V | sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p") "<" 3.0 | bc) = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\'  'select-pane -l'"
if-shell -b '[ $(echo $(tmux -V | sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p") ">=" 3.0 | bc) = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\\\'  'select-pane -l'"
# æä¾›å¤‡ç”¨æ˜ å°„
bind C-l send-keys 'C-l'
bind C-\\ send-keys 'C-\'

bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R
bind-key -T copy-mode-vi 'C-\' select-pane -l

# è°ƒæ•´çª—æ ¼å¤§å°çš„å¿«æ·é”®(ä¸ç”¨prefix); ç„¶å å¯ä»¥ç”¨ prefix + <key> ä½¿ç”¨è¿™äº›é”®åŸæœ‰çš„åŠŸèƒ½(å¦‚æœæœ‰çš„è¯)
# å‘ä¸Šå¢åŠ çª—æ ¼å¤§å°
bind -n C-Up    resize-pane -U 5
bind -r C-Up send-keys 'C-Up'
## å‘ä¸‹å¢åŠ çª—æ ¼å¤§å°
bind -n C-Down  resize-pane -D 5
bind -r C-Down send-keys 'C-Down'
## å‘å·¦å¢åŠ çª—æ ¼å¤§å°,å†²çª,éœ€è¦ä¿®æ”¹macä¸Šç§»åŠ¨spaceçš„å¿«æ·é”®
bind -n C-Left  resize-pane -L 5
bind -r C-Left send-keys 'C-Left'
## å‘å³å¢åŠ çª—æ ¼å¤§å°,å†²çª,éœ€è¦ä¿®æ”¹macä¸Šç§»åŠ¨spaceçš„å¿«æ·é”®
bind -n C-Right resize-pane -R 5
bind -r C-Right send-keys 'C-Right'
# éœ€è¦prefix
bind-key -r H resize-pane -L 2
bind-key -r J resize-pane -D 2
bind-key -r K resize-pane -U 2
bind-key -r L resize-pane -R 2

###### æ’ä»¶ tmux-sensible æ·»åŠ çš„å¿«æ·é”®
# prefix + s        åœ¨æœ€åä¸€ä¸ªæ´»åŠ¨çª—å£ä¹‹é—´åˆ‡æ¢(å½“prefixæ˜¯C-sæ—¶); å½“prefixæ˜¯C-aæ—¶,è¿™ä¸ªå¿«æ·é”®ä¼šè‡ªåŠ¨å˜ä¸º prefix+a, ä»¥æ­¤ç±»æ¨
# ä½†æ˜¯ä¸ prefix + s é»˜è®¤çš„æ˜¾ç¤ºæ‰€æœ‰sessionçš„åŠŸèƒ½å†²çª,æ‰€ä»¥tmux-sensibleä¸ä¼šç»‘å®šè¿™ä¸ªäº†

# ------------------------------------------ é»˜è®¤å¤–è§‚(æ²¡æœ‰å®‰è£…ä¸»é¢˜æ—¶çš„æ ·å¼) ------------------------------------------
#set -g status-left "#[bg=#FF661D] ğŸ¶ #S " # çŠ¶æ€æ å·¦ä¾§å†…å®¹
#
#set -g status-interval 1 # çŠ¶æ€æ åˆ·æ–°æ—¶é—´
#set -g status-justify left # çŠ¶æ€æ åˆ—è¡¨å·¦å¯¹é½
#setw -g monitor-activity on # éå½“å‰çª—å£æœ‰å†…å®¹æ›´æ–°æ—¶åœ¨çŠ¶æ€æ é€šçŸ¥
#
#set -g status-bg black # è®¾ç½®çŠ¶æ€æ èƒŒæ™¯é»‘è‰²
#set -g status-fg yellow # è®¾ç½®çŠ¶æ€æ å‰æ™¯é»„è‰²
#set -g status-style "bg=black, fg=yellow" # çŠ¶æ€æ å‰æ™¯èƒŒæ™¯è‰²
#
#set -g status-left-length 300 # çŠ¶æ€æ å·¦è¾¹é•¿åº¦300
#set -g status-right-length 500 # çŠ¶æ€æ å·¦è¾¹é•¿åº¦500
#set -g status-right 'Continuum status: #{continuum_status}'
#set -wg window-status-format " #I #W " # çŠ¶æ€æ çª—å£åç§°æ ¼å¼
#set -wg window-status-current-format " #I:#W#F " # çŠ¶æ€æ å½“å‰çª—å£åç§°æ ¼å¼(#Iï¼šåºå·ï¼Œ#wï¼šçª—å£åç§°ï¼Œ#Fï¼šé—´éš”ç¬¦)
#set -wg window-status-separator "   " # çŠ¶æ€æ çª—å£åç§°ä¹‹é—´çš„é—´éš”
#set -wg window-status-current-style "bg=red" # çŠ¶æ€æ å½“å‰çª—å£åç§°çš„æ ·å¼
#set -wg window-status-last-style "fg=red" # çŠ¶æ€æ æœ€åä¸€ä¸ªçª—å£åç§°çš„æ ·å¼

# ------------------------------------------ å¤åˆ¶ç²˜è´´ ------------------------------------------
# è¿›å…¥å¤åˆ¶æ¨¡å¼ å¿«æ·é”®ï¼šprefix + [ ; é€€å‡º: enter æˆ–è€… q
# è®¾ç½® tmux ä¸­å¤åˆ¶æ¨¡å¼ ä¸º vi é£æ ¼ ; é»˜è®¤ä¸º emacs æ¨¡å¼
setw -g mode-keys vi # å¼€å¯vié£æ ¼å,æ”¯æŒviçš„C-dã€C-uã€hjklç­‰å¿«æ·é”®

# ç»‘å®šescé”®ä¸ºè¿›å…¥å¤åˆ¶æ¨¡å¼,ä½¿ç”¨é»˜è®¤çš„ prefix + [
# bind Escape copy-mode

# å¼€å¯vimæ¨¡å¼å,vå’Œyè¿˜æ˜¯ä¸èƒ½ä½¿ç”¨,éœ€è¦æ‰‹åŠ¨é…ç½®æŒ‰é”®
# æ–°ç‰ˆæœ¬ï¼š
bind -T copy-mode-vi v send -X begin-selection # å¼€å§‹å¤åˆ¶
bind -T copy-mode-vi y send -X copy-selection # å¤åˆ¶å‰ªåˆ‡æ¿
# bind p pasteb # ç»‘å®špé”®ä¸ºç²˜è´´æ–‡æœ¬ï¼ˆpé”®é»˜è®¤ç”¨äºè¿›å…¥ä¸Šä¸€ä¸ªçª—å£ï¼Œä¸å»ºè®®è¦†ç›–ï¼‰
# æ—§ç‰ˆæœ¬ï¼š
# bind -t vi-copy v begin-selection  # ç»‘å®švé”®ä¸ºå¼€å§‹é€‰æ‹©æ–‡æœ¬
# bind -t vi-copy y copy-selection # ç»‘å®šyé”®ä¸ºå¤åˆ¶é€‰ä¸­æ–‡æœ¬

# å’Œç³»ç»Ÿå‰ªåˆ‡æ¿äº’é€š,éœ€è¦ç»ˆç«¯æ”¯æŒ;é»˜è®¤ä¸º external;æ›´å½»åº•çš„æœ‰ on ;  è¿˜æœ‰ä¸ª off: ä¸åŒæ­¥å‰ªåˆ‡æ¿
set -g set-clipboard external

# ------------------------------------------ æ’ä»¶ ------------------------------------------
# List of plugins
# æ’ä»¶ç®¡ç†
set -g @plugin 'tmux-plugins/tpm'
# tmuxç¯å¢ƒå¤‡ä»½å’Œæ¢å¤
set -g @plugin 'loganoxo/tmux-resurrect'
# è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤
set -g @plugin 'loganoxo/tmux-continuum'
# å¥½ç”¨çš„è®¾ç½®
set -g @plugin 'loganoxo/tmux-sensible'
# ç”¨ fzf ç®¡ç† tmux; é»˜è®¤å¿«æ·é”®ä¸º prefix + shift + f
set -g @plugin 'sainnhe/tmux-fzf'
# draculaä¸»é¢˜
set -g @plugin 'dracula/tmux'

# ------------------------  tmux-resurrect  ---------------------------
# é»˜è®¤æƒ…å†µä¸‹ï¼Œtmux-resurrect æŠŠ tmux ç¯å¢ƒä¿å­˜åˆ° ~/.tmux/resurrect ç›®å½•ä¸­çš„æ–‡ä»¶ä¸­;å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªé…ç½®ä¿®æ”¹,ä»…å…è®¸ä½¿ç”¨ $HOME, $HOSTNAME, and ~
# set -g @resurrect-dir '/some/path'
# æ›´æ”¹tmux-resurrectçš„é»˜è®¤é”®ç»‘å®š,C-sä¸ºprefix,å†²çªäº†;è®¾ä¸º <S> å¤§å†™çš„
set -g @resurrect-save 'S'
# C-r ä¼šæ¢å¤æœ€æ–°ä¿å­˜çš„å†…å®¹; å¦‚æœè¦æ¢å¤å…¶ä»–æ—¶é—´ç‚¹çš„å†…å®¹: cd ~/.tmux/resurrect/ ; ln -sf <file_name> last ; prefix + Ctrl-r
set -g @resurrect-restore 'R'
# å¼€å¯æ¢å¤ å°çª—æ ¼ çš„å†…å®¹çš„åŠŸèƒ½
set -g @resurrect-capture-pane-contents 'on'
# æ¢å¤shellçš„å†å²è®°å½•,åŠŸèƒ½å·²å¼ƒç”¨
# set -g @resurrect-save-shell-history 'on'
# tmux-resurrect é»˜è®¤åªä¼šä¿å­˜å’Œæ¢å¤ä¸€å°éƒ¨åˆ†ç¨‹åº:vi vim nvim emacs man less more tail top htop irssi weechat mutt,å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ·»åŠ 
# ä½†æ˜¯tmux-resurrectçš„æœ¬è´¨æ˜¯è®°å½•å‘½ä»¤åˆ°æ–‡ä»¶,ç„¶åæ¢å¤æ—¶é‡æ–°æ‰§è¡Œ,å½“æ¢å¤çš„å‘½ä»¤æ˜¯æœ‰çŠ¶æ€çš„,å¯èƒ½å¯¼è‡´é‡å¤æ‰§è¡Œå¯¼è‡´é”™è¯¯
# set -g @resurrect-processes 'ssh'

# ------------------------  tmux-continuum  ---------------------------
# å•ä½ä¸ºåˆ†é’Ÿ; Continuumé»˜è®¤æ¯éš”15minså¤‡ä»½ä¸€æ¬¡
set -g @continuum-save-interval '60'
# set -g @continuum-save-interval '0' #å…³é—­è‡ªåŠ¨å¤‡ä»½
# set -g @continuum-restore 'on' # å¯ç”¨è‡ªåŠ¨æ¢å¤
# Tmux Continuumæä¾›äº†ä¸€ä¸ªæŸ¥çœ‹è¿è¡ŒçŠ¶æ€çš„æ’å€¼
# set -g status-right 'Continuum status: #{continuum_status}'
# åœ¨Terminal æˆ–è€… iTerm2 ä¸­è‡ªåŠ¨å…¨å±å¯ç”¨tmux
# set -g @continuum-boot 'on'

# ------------------------  fzf  ---------------------------
# fzf çª—å£å¤§å°
TMUX_FZF_OPTIONS="-p -w 80% -h 90% -m --preview-window hidden"
# é»˜è®¤å¯ç”¨é¢„è§ˆ,ä¸å¯ç”¨è®¾ä¸º0
TMUX_FZF_PREVIEW=0
# 1: æ˜¾ç¤ºä¸­åŒ…å«å½“å‰çª—å£æˆ–çª—æ ¼,é»˜è®¤ä¸åŒ…å«;æ‰“å¼€æ³¨é‡Šåè®¾ç½®ä¸º0æˆ–1éƒ½ä¼šåŒ…å«
# TMUX_FZF_SWITCH_CURRENT=1
# é¢„è§ˆçª—å£é»˜è®¤å°†å°è¯•â€œè·Ÿéšâ€å†…å®¹,å°±æ˜¯æ˜¾ç¤ºçª—å£çš„æœ€åçš„å†…å®¹,å–æ¶ˆ
TMUX_FZF_PREVIEW_FOLLOW=0
# è®¾ç½®è¦æ˜¾ç¤ºçš„åŠŸèƒ½å’Œé¡ºåº
TMUX_FZF_ORDER="menu|session|window|pane|command|keybinding|clipboard|process"

# è‡ªå®šä¹‰èœå•å‘½ä»¤ (menué€‰é¡¹)
TMUX_FZF_MENU=\
"åŒæ­¥(ä¸åŒæ­¥)å½“å‰çª—å£çš„æ‰€æœ‰pane(prefix+C+t)\ntmux setw synchronize-panes\n"\
"é‡æ–°å¸ƒå±€å½“å‰çª—å£æ‰€æœ‰paneçš„å®½é«˜(prefix+Space)\ntmux select-layout tiled\n"\
"test\necho 'Hello test!'\n"


# ------------------------  dracula  ---------------------------
# åŠ è½½draculaä¸»é¢˜çš„æ’ä»¶,å¦‚continuumå¦‚æœä¸åŠ è½½,åé¢é…ç½®çš„set -g @dracula-continuum-mode countdownä¹Ÿä¸ä¼šæ˜¾ç¤º
set -g @dracula-plugins "cwd attached-clients network synchronize-panes ssh-session cpu-usage ram-usage continuum"

# å¯ç”¨çª—å£æ ‡å¿—
set -g @dracula-show-flags true
# è°ƒæ•´çŠ¶æ€æ çš„åˆ·æ–°ç‡,é»˜è®¤ä¸º5
set -g @dracula-refresh-rate 5
# å¯ç”¨é«˜å¯¹æ¯”åº¦çª—æ ¼è¾¹æ¡†
set -g @dracula-border-contrast true
# éšè—ç©ºæ’ä»¶
set -g @dracula-show-empty-plugins false
# å¯ç”¨powerlineç¬¦å·
set -g @dracula-show-powerline true
#set -g @dracula-show-left-sep î‚¸
set -g @dracula-show-right-sep î‚º
#set -g @dracula-show-right-sep î‚¶
#set -g @dracula-show-left-sep î‚´

# å·¦ä¾§å›¾æ ‡
set -g @dracula-show-left-icon "ğŸ¶ #h | #S"
# default is 1, it can accept any number and 0 disables padding.
set -g @dracula-left-icon-padding 1

# æ˜¾ç¤ºä¸‹ä¸€æ¬¡ä¿å­˜çš„å€’è®¡æ—¶
set -g @dracula-continuum-mode countdown

# cpu æ ‡ç­¾ î‰¦ î°™ ï‹› ó°› ó°˜š ó°»Ÿ ó°» 
set -g @dracula-cpu-usage-label "î‰¦ "
# å†…å­˜ æ ‡ç­¾ î‰¦ î°™ ï‹› ó°› ó°˜š
set -g @dracula-ram-usage-label "ï‹› "

# ping æŸ¥çœ‹ç½‘ç»œæ˜¯å¦ç•…é€š
set -g @dracula-network-hosts "1.1.1.1 8.8.8.8"
set -g @dracula-network-ethernet-label "ó°’ª Eth"
set -g @dracula-network-offline-label "ó°–ª "
set -g @dracula-network-wifi-label "ï‡« "
#ethernet: ó°ˆ€ ó°’ª ó°’ ó°Œ— ó°Œ˜
#offline: ó°–ª  ó±¢
#wifi: ï‡«  ï¨ ï¼  ó°–©  ó°˜Š ó°’¢

# ssh å½“æœªé€šè¿‡ ssh è¿æ¥æ—¶ä¸è¾“å‡ºä»»ä½•å†…å®¹(åœ¨æœ¬åœ°tmuxä¸­ç”¨sshå‘½ä»¤è¿æ¥æœåŠ¡å™¨çš„æ—¶å€™æ‰æ˜¾ç¤º;å¦‚æœå…ˆsshè¿æ¥è¿œç¨‹æœåŠ¡å™¨,ç„¶ååœ¨è¿œç¨‹æœåŠ¡å™¨ä¸­ä½¿ç”¨tmux,é‚£æ˜¯ä¸æ˜¾ç¤ºçš„)
set -g @dracula-show-ssh-only-when-connected true

# æ˜¾ç¤ºæ˜¯å¦æ­£åœ¨ä½¿ç”¨tmuxçš„çª—æ ¼åŒæ­¥åŠŸèƒ½,è¿™é‡Œæ˜¯è®¾ç½®æ ‡ç­¾
set -g @dracula-synchronize-panes-label "ó°“¦ "

# è®¾ç½®è¦æ˜¾ç¤ºçš„æœ€å°å®¢æˆ·ç«¯æ•°é‡
set -g @dracula-clients-minimum 2
set -g @dracula-clients-singular client
set -g @dracula-clients-plural clients

# è°ƒè‰²æ¿
set -g @dracula-colors "
# Dracula Color Pallette
white='#f8f8f2'
gray='#44475a'
dark_gray='#282a36'
light_purple='#D63484'
dark_purple='#6272a4'
cyan='#8be9fd'
green='#A1D6CB'
orange='#FC8F54'
red='#ff5555'
pink='#FB9EC6'
yellow='#f1fa8c'
light_blue='#9DBDFF'
light_orange='#FFCF96'
light_red='#FF8989'
my_purple='#bd93f9'
"
set -g @dracula-ram-usage-colors "my_purple dark_gray"
set -g @dracula-cpu-usage-colors "pink dark_gray"
set -g @dracula-cwd-colors "yellow dark_gray"
set -g @dracula-synchronize-panes-colors "light_orange dark_gray"
set -g @dracula-continuum-colors "light_blue dark_gray"
set -g @dracula-attached-clients-colors "light_red dark_gray"

# ------------------------  catppuccinä¸»é¢˜  ---------------------------
# catppuccinè¦æ‰‹åŠ¨å®‰è£… ; TPM å­˜åœ¨ä¸€äº›åç§°å†²çªé—®é¢˜,å› ä¸º catppuccin å’Œ dracula çš„ä¸»é¢˜ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å¤¹éƒ½æ˜¯ tmux
# mkdir -p ~/.config/tmux/plugins/catppuccin
# git clone -b v2.1.2 https://github.com/catppuccin/tmux.git ~/.config/tmux/plugins/catppuccin/tmux

# Configure the catppuccin plugin
# set -g @catppuccin_flavor "mocha"
# set -g @catppuccin_window_status_style "rounded"

# Load catppuccin
#run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux
# For TPM, instead use `run ~/.config/tmux/plugins/tmux/catppuccin.tmux`

# Make the status line pretty and add some modules
#set -g status-right-length 100
#set -g status-left-length 100
#set -g status-left ""
#set -g status-right "#{E:@catppuccin_status_application}"
#set -agF status-right "#{E:@catppuccin_status_cpu}"
#set -ag status-right "#{E:@catppuccin_status_session}"
#set -ag status-right "#{E:@catppuccin_status_uptime}"
#set -agF status-right "#{E:@catppuccin_status_battery}"

# ------------------------------------------ End ------------------------------------------
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# ~/.tmux/plugins/tpm/bin/install_plugins
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
# prefix + I                å®‰è£…æ’ä»¶
# prefix + U                å‡çº§æ’ä»¶
# prefix + alt + u          å¸è½½ä¸åœ¨æ’ä»¶åˆ—è¡¨ä¸­çš„æ’ä»¶
run '~/.tmux/plugins/tpm/tpm'


# ------------------------  é˜²æ­¢è¢«è¦†ç›–  ---------------------------
# è®¾ç½®æ™®é€šæ¶ˆæ¯çš„æ ·å¼
set-option -g message-style "fg=#FF748B,bg=#3C4048,bold"
# è®¾ç½®å‘½ä»¤æ¶ˆæ¯çš„æ ·å¼
set-option -g message-command-style "fg=#FF748B,bg=#3C4048,bold"

# è®¾ç½®flagé¢œè‰²,é»˜è®¤çš„draculaé¢œè‰²å¤ªæµ…äº†
flags="#{?window_flags,#[fg=#D63484 bold]#{window_flags},}"
set-window-option -g window-status-format "#[fg=#f8f8f2]#[bg=#44475a] #I #W${flags}"
set-window-option -g window-status-activity-style "bold"
set-window-option -g window-status-bell-style "bold"
